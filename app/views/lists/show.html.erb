<p id="notice"><%= notice %></p>

<h2>
  <%= best_in_place @list, :name, :type => :input, activator: '#list_rename' %>
  <%= link_to 'Rename', '', class: 'btn btn-primary', id: 'list_rename' %>
  <%= link_to 'Delete', list_path(@list), method: :delete, class: 'btn btn-danger', confirm: 'Are you sure you want to delete this list?' %>
  <%= link_to 'View in Calendar', '', class: 'btn btn-success' %>
</h2>

<p><%= @list.list_type %> List</p>

<table id="list_table" class="table table-striped">
  <thead>
    <tr>
      <% if @list.list_type == 'Event' %>
        <th>Event Name</th>
        <th>Category</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>City/State</th>
        <th>Country</th>
        <th>Sponsors/Exhibitors</th>
        <th></th>
      <% else %>
        <th>Company Name</th>
        <th>Category</th>
        <th></th>
      <% end %>
    </tr>
  </thead>
  <% if @list.trackers.any? %>
    <tbody>
    <% @list.trackers.each do |tracker| %>
      <tr>
          <td><%= link_to tracker.tracking.name, tracker.tracking %></td>
          <td><%= print_list(tracker.tracking.sector_names) %></td>
          <% if @list.list_type == 'Event' %>
            <td><%= tracker.tracking.event_start_date.strftime('%D') %></td>
            <td><%= tracker.tracking.event_end_date.strftime('%D') %></td>
            <td><%= tracker.tracking.city_and_state %></td>
            <td><%= tracker.tracking.country %></td>
            <td><%= tracker.tracking.attendances.length %></td>
          <% end %>
          <td><%= link_to 'Remove', tracker_url(tracker), method: :delete %></td>
      </tr>
    <% end %>
    </tbody>
  <% else %>
    <tr><td>No events found. Please try another filter.</td></tr>
  <% end %>
</table>

<script>

  $(function(){
    $('#list_table').dataTable();
    $(".best_in_place").best_in_place();
  });

</script>



